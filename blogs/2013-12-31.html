<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<link href='../stylesheets/doc.css' rel='stylesheet' type='text/css' />
<link href='favicon.png' rel='shortcut icon' />
<script type="text/javascript" src="../javascripts/ga.js"></script>
<title>[译]编码指南：寻找科学中的艺术</title>
</head>

<body>
	<h1>[译]编码指南：寻找科学中的艺术</h1>
	<span class="date">2013-12-31</span>
	<div class="divider"></div>
	
	<p>本文翻译自<a href="http://queue.acm.org/detail.cfm?id=2063168">《Coding Guidelines: Finding the Art in the Science》</a></p>
	<p>
		<b>作者</b> <br> 
		Robert Green, Henry Ledgard
	</p>
	<p>
		<b>日期</b><br> 2011/11/02
	</p>
	
	<p>
		好代码和伟大的代码的区别是什么？
	</p>
	<p>
		计算机科学既是科学也是艺术。<br>
		它科学的一面涵盖了从计算理论、算法研究到代码设计和编程架构。<br>
		然而，当提及实现时，艺术的光芒、微妙的风格以及高超的技艺组合将好代码和伟大的代码区分开来。
	</p>
	<p>
		像艺术一样，代码同时是主观的和非主观的。<br>
		编码非主观的方面就包括一些创建好代码必须遵循的“硬”规范：设计模式，项目结构，公共库的使用等等。<br>
		虽然这些概念奠定了高质量、可维护代码的基础，但正是程序员间不同的技术与工具的细微差别——对齐方式、命名、空格使用、语境利用、语法高亮和IDE的选择——真正使代码清晰、可维护和容易理解，同时也使得代码更好的表达了其意图、功能和用法。
	</p>
	<p>
		不错的代码和伟大的代码有所区别，是因为每个人都有基于他（或她）自己好（或坏）的习惯形成的特定的编码风格喜好。<br>
		任何人都可以遵循设计模式或其他一些“硬”规范来编写代码，但伟大的程序员会以自己的方式来填充代码的细节，使代码变得清晰、简洁、易懂。<br>
		这很重要，正如每个人都可以从一件艺术品中体会到独一无二的意义，不管代码的架构和设计怎样，每个开发者或代码阅读者可能也会从代码的命名和其他约定习俗中推断出不同的含义。
	</p>
	<p>
		从另一个角度来看，编程可能也可以被看作是一种“加密”形式。<br>
		程序员以各种方式设计问题的解决方案并且将它们加密为程序及其附属文件。<br>
		数月或数年后，需要改变时，一个新的程序员必须解密当时解决方案。<br>
		这可不是一个让人羡慕的任务，因为它总被归咎于在项目“加密”时期没有清晰的表达。<br>
		当必要的关键信息存在时解密信息其实很简单，所以特别关注代码自身的表达是理解旧代码的关键。
	</p>
	<p>
		为了解决这个问题，有些作品定义了针对整个编程语言的单一编码标准，而另一些则勉强接受了一些命名约定，只要这些约定保持一致。<br>
		通常来说，漂亮的代码被定义为：易读、聚焦、可测试和优雅的。<br>
		更极端的例子是整个语言的发明建立在一系列完美的理念上，例如 Ruby 或 Python。<br>
		Ruby 强调简洁、简单、灵活及平衡。<br>
		Python 背后的原则在《The Zen of Python》一书中有清晰的描述，它聚焦在漂亮、简单、可读和可靠性。
	</p>
	<p>
		我们针对这个问题的解决办法是开发了一套编码指南系统。<br>
		虽然这些指南来自学术界，但是它们对从业者同样有用。<br>
		这些指南基于一些广泛的原则，这些原则体现了表达沟通的基本原理，并将编码惯例的观念提到了更高的高度。<br>
		应用这些惯例有助于提升代码库的可持续性。<br>
		本文就着眼于这些基本原则。
	</p>
	<p>
		这里有一个没有考虑的方面是语法高亮和IDE。<br>
		一方面使得代码更容易阅读（因为语法高亮，代码折叠等）同时更容易管理（例如，快速查找，重构函数、变量等），我们的指南是相对语法颜色和IDE中立的。<br>
		它们反应了在任意的设定下写代码的基本切重要的原则。<br>
		虽然，IDE能以某种形式帮助提升可读性和可理解性，但是基于这些工具的功能并不是标准的（例如，想想Visual Studio、Eclipse、和VIM下的这些不同功能）。<br>
		同样的，语法高亮的环境差异很大，而且可以很容易的改变以适应个人偏好。<br>
		下列原则的目标是建立一个独立于IDE的良好编程的基础。
	</p>
	<p>
		<b>1. 将一段程序当作一个表格</b><br>
		在最近的 ACM Queue 发表的文章上，Poul-Henning Kamp 提出了一个迷人观点：很多编程语言的风格源自于 ASCII 字符集和基于打字机的终端。<br>
		编程语言没有利用现代设备的图形属性和选项。<br>
		虽然代码是按照清晰的英语语法格式编写的，但它并不是英文句子。<br>
		事实上，它更像数学和表格。
	</p>
	<p>
		这是一个影响深远的原则。<br>
		首先，它谈及的是字体的使用。<br>
		对于程序代码不要使用可变宽（比例）字体，因为代码不是文本。<br>
		定宽字体（例如，Courier 和 Data Gothic）看起来更好且更容易对齐代码。<br>
		变宽字体妨碍代码对齐，更重要的是，它让代码看起来更不像代码。
	</p>
	<p>
		接下来我们进一步思考程序是一系列动作的组合序列，或者是一种高层次的算法，每一段代码都可以被认为是一种图、表和菜单。<br>
		下图1、2、3使用了垂直对齐来表现对称性。<br>
		这是一种有力的表达沟通方式。<br>
		<img alt="" src="2013-12-31-1.png">
		<img alt="" src="2013-12-31-2.png">
		<img alt="" src="2013-12-31-3.png">
	</p>
	<p>
		当一行长代码溢出到多行时，我们建议打破并重排代码。
		如下：
		<pre><code>
participant newEntry = new participant (id, name, address1, address2, city,
state, zip, phone, email);
		</code></pre>
	</p>
	<p>
		使用下面的方式替代
		<pre><code>
participant newEntry = new participant (id, name, address1, address2,
    city, state, zip, phone, email);
    
participant newEntry = new participant(id, name, address1, address2, city,
    state, zip, phone, email);
        </code></pre>
	</p>
	<p>
		<b>2. 让简单的英语成为你的向导</b><br>
		程序员为某样东西创造了一个名字，名字包含了其使用的全部知识，通常许多名字只在人们知道其代表的含义时才有意义。<br>
		然而，程序员有这样一个问题：基于概念来创造名字。<br>
		但真正的挑战正好相反：从名字推导出概念！<br>
		这正是程序阅读者遭遇的问题。
	</p>
	<p>
		考虑这个来自公共 C++ 头文件&lt;iostream.h&gt;的简单变量名 sputn。<br>
		一个缺乏经验或不熟悉的程序员可能就会遭遇一系列的困惑，例如：这是一个整数？还是个指针？一个数组或结构体？一个方法或变量<br>
		是否 sp 表示一个保存指针（saved pointer）？是否 sput 表示一个操作执行 n 次？<br>
		你是读作 sputn 或 s-putn 或 sput-n 或 s-put-n？
	</p>
	<p>
		我们提倡命名基于传统的英语用法——特别是，简单、正式、缩略的英语用法。<br>
		考虑下面一些更具体的指南：<br>
		- 变量和类应是名词或名词短语。<br>
		- 类名像是集合名词。<br>
		- 变量名像是专有名词。<br>
		- 过程名应是动词或动词短语。<br>
		- 方法的返回值通常应是名词或名词短语。<br>
		- 布尔值应是形容词。<br>
		- 对于复合名，保留传统的英语语法。<br>
		- 尽量让名字可发音。<br>
		以上原则的一些例子如图4所示：<br>
		<img alt="" src="2013-12-31-4.png">
	</p>
	<p>
		如下这个例子，有一个小而有趣的问题：
		<pre><code>
numFiles = countFiles(directory);
		</code></pre>
	</p>
	<p>
		countFiles 是一个不错的名字，但却不是最理想的名字，因为它是一个动词。<br>
		动词被保留用作针对变量无副作用的过程调用。<br>
		对于针对变量无副作用的函数调用采用名词或名词短语。<br>
		人们通常不说：
		<pre><code>
Y = computeSine(X); 
milesDriven = computeDistance(location1, location2);
		</code></pre>
	</p>
	<p>
		而是
		<pre><code>
Y = sine(X); or
milesDriven = Distance(location1, location2);
		</code></pre>
	</p>
	<p>
		因此我们建议采用 fileCount 来稍稍改进。
		<pre><code>
numFiles = fileCount(directory);
		</code></pre>
	</p>
	<p>
		更重要的是，这强制了一个通用的原则：动词表示过程，名词或形容词表示函数。
	</p>
	<p>
		<b>3. 依赖上下文来简化代码</b><br>
		如果其他一切相同，那么更短的代码通常更好。<br>
		例如，用作索引值的本地变量通常被命名为 i、j、k 等。<br>
		用在循环中每一行的数组索引没有比 i 更合适的。<br>
		使用 index 或 elementNumber 这样额外描述的变量掩盖了计算的细节。<br>
		一个很少使用的变量可能更值得一个长的名字：例如，MaxPhysicalAddr。<br>
		当一个变量名很长而又到处出现，很快就变得很难搞明白到底怎么发生了什么。<br>
		一个变量的名字通常可以通过其使用的上下文来缩短——例如， 在一个栈的实现中，使用变量 Store 而非 StackStore。<br>
		<img alt="" src="2013-12-31-5.png">
	</p>
	<p>
		<b>4. 使用空白表现结构</b>
		在书面和口头沟通时可能达到了高层次的清晰，但若没有非语言亲身接触和倾向性的暗示则常常缺乏想要表达的含义。<br>
		一个人的身体语言有助于阐明他们说出的话。<br>
		类似的场景下，程序员则依赖代码间的空白——间接来说——来表达逻辑、意图和理解。
	</p>
</body>
</html>

